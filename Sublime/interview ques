Question 1:

Write a shell script to connect to a remote machine and retrieve the memory usage of a process. The script should define a function as follows:function getUsage {}to get the usage of the process.

Input: Script will take as input a file containing lines in the following format:

IP username password process_name

e.g. 127.0.0.1 admin admin apache2

Output: IP : PROCESS : Memory usage of the process


Answer:
---------

# username to connect via ssh
USER=$2
# destination path/filename to save results to
DEST=$3
# source list of hostnames to read from
FILE=$1

[[ $# -ne 3 ]] && { echo -e "\nUsage: $0  <User> <ServerList> <LogFile>\n"; exit 1; };

func_getUsage() {

    local Ipaddr=$1
    local Cmd="${@:2}"
    local LogIt=${DEST}
    ssh -q -o "BatchMode yes" -o "ConnectTimeout 5" -l $USER $Ipaddr "${Cmd}"
    [[ $? -ne 0 ]] && printf "${Ipaddr}\tUnable to connect to host\n" >> ${LogIt}
}

GetTotalProcs="awk '/processor/{a++} END{print a}'  /proc/cpuinfo"
GetMemoryDetails="free -g | sed -n -e '/^Mem:/s/^[^0-9]*\([0-9]*\) .*/\1/p'"

# Iterate through line items in FILE and
# execute ssh, if we connected successfully
# run proc/info and free to find memory/cpu alloc
# write it to DEST path/file
# if we dont connect successfully, write the hostname
# and "unable to connect to host" error to DEST path/file
for srv in $(< $FILE );
do
    echo -n "."
    A="$( func_ssh $srv $GetTotalProcs )"
    B="$( func_ssh $srv $GetMemoryDetails )"
    echo "${srv} CPU: ${A} MEMORY: ${B}" >> ${DEST}

done

# All line items have been gone through,
# show done, and exit out
echo ""
echo "Done!"
echo "Check the list 'checkssh_failure' for errors."
exit 0






Question 2:

Write a shell script that implements a password validator. The rules for the validator are as follows:

1. Password length should be at least 8 characters

2. Should contain alphabets and numbers

3. Should contain both uppercase and lowercase letters

Input: sample password

Output: "Strong Password" (if conditions are met)

"Weak Password" (if conditions are not met)

Do feel free to reach out to us for any question that you may have.